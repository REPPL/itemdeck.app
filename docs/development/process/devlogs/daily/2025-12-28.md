# Daily Devlog: 2025-12-28

## Session Focus

Continued v0.11.5 implementation with UI refinements and bug fixes.

## Changes Made

### UI Improvements

1. **Collection Toast Redesign**
   - Changed from small top toast to prominent centred modal
   - Added backdrop with blur effect
   - Increased icon and text size for visibility
   - Added "Click to dismiss" hint

2. **Drag Placeholder Visibility**
   - Changed card placeholder opacity from 50% to 100% during drag
   - Placeholder now stays fully visible to show where card will return

3. **Top Badge Field Selector** (replaces Show Rank Badge toggle)
   - Added `topBadgeField` to `FieldMappingConfig`
   - Users can now select any suitable field for the top badge:
     - Order/Rank, My Rank, My Verdict, or any rating/score field
     - "None" option hides the badge entirely
   - Renamed "Unranked Text" to "Text if Empty"
   - `showRankBadge` is now derived from `topBadgeField !== "none"`

4. **Settings Panel Cleanup**
   - Removed Edit Mode from Appearance > Interactions tab
   - Edit Mode remains accessible in System > Developer

### Bug Fixes

1. **App Logo Display**
   - Fixed app logo not showing when "itemdeck App Logo" selected
   - Issue: fallback chain was overriding undefined with platform logo
   - Fix: Added explicit check at CardBack prop level

2. **High Contrast Mode** (from earlier session)
   - Fixed grey text on dark background being unreadable
   - Added proper text colour overrides for high contrast mode

### Documentation Updates

1. **F-069 YouTube Support**
   - Marked all implementation tasks as complete
   - Marked all success criteria as complete

2. **R-010 Settings UX Patterns**
   - Updated recommendation from 3 tabs to 4 tabs
   - Documented actual implementation structure

3. **Display Schema Reference**
   - Added User Settings Field Mapping section
   - Documented all field mapping options including `topBadgeField`
   - Explained relationship between `topBadgeField` and `showRankBadge`

## Files Modified

### Components
- `src/components/CollectionToast/CollectionToast.tsx` - Modal-style display
- `src/components/CollectionToast/CollectionToast.module.css` - Backdrop, centering
- `src/components/DraggableCardGrid/DraggableCardGrid.tsx` - Opacity fix
- `src/components/SettingsPanel/AppearanceSettingsTabs.tsx` - Remove Edit Mode
- `src/components/SettingsPanel/CardSettingsTabs.tsx` - Top Badge Field selector
- `src/components/Card/Card.tsx` - App logo fix
- `src/components/CardGrid/CardGrid.tsx` - Derive showRankBadge

### Store
- `src/stores/settingsStore.ts` - Added `topBadgeField` to FieldMappingConfig

### Hooks
- `src/hooks/useAvailableFields.ts` - Added `topBadgeFields` to return

### Documentation
- `docs/development/roadmap/features/completed/F-069-youtube-video-support.md`
- `docs/development/research/R-010-settings-ux-patterns.md`
- `docs/reference/schemas/v1/components/README.md`

## Next Steps

- Consider implementing auto-discovery for entity JSON files (to remove index.json requirement)
- Continue v0.11.5 milestone features

---

**Milestone**: v0.11.5 (in progress)
