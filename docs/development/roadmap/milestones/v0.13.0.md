# v0.13.0 - Modular Plugin Architecture

## Overview

Transform itemdeck into a fully modular architecture where Settings, Themes, Game Mechanics, and Sources are all plugins. This enables community extensibility while maintaining security.

## Features

| ID | Feature | Complexity | Status |
|----|---------|------------|--------|
| WP-A | Plugin Core Infrastructure (schemas, loader, cache, security, validation) | Large | âœ… Complete |
| WP-B | Plugin Migration (adapters, themes, mechanics, sources) | Large | âœ… Complete |
| WP-C | User Documentation (tutorials, guides) | Medium | ðŸ“‹ Planned |
| WP-D | Plugin Discovery UI (browser, manager) | Medium | ðŸ“‹ Planned |
| WP-E | Developer Documentation & ADRs | Medium | ðŸ“‹ Planned |

## Deferred Features

The following features originally planned for v0.13.0 have been moved to [v0.14.0](./v0.14.0.md):

| ID | Feature | Reason |
|----|---------|--------|
| [F-059](../features/planned/F-059-competing-mechanic.md) | Competing Mechanic | Focus v0.13.0 on plugin foundation |
| [F-060](../features/planned/F-060-quiz-mechanic.md) | Quiz Mechanic | Will be first test of plugin system |

## Dependencies

- **v0.12.5**: Snap Ranking Mechanic, Fit Layout (prerequisite)

## Architecture Overview

### Plugin Types
- **Settings** - User preferences and configuration
- **Themes** - Visual styling (colours, fonts, images)
- **Mechanics** - Interactive gameplay modes
- **Sources** - Collection data sources

### Distribution Tiers
- **Built-in** - Bundled with itemdeck
- **Official** - Published in registry, reviewed
- **Community** - User-provided URL, sandboxed

### Security Model
- Web Worker sandbox for community plugins
- Capability-based permissions
- User consent for high-risk capabilities

## Work Packages

Implementation structured as parallel work packages:

| Package | Description | Dependencies |
|---------|-------------|--------------|
| WP-A | Plugin Core Infrastructure | None |
| WP-B | Migration to Plugin Architecture | WP-A |
| WP-C | User Documentation | None |
| WP-D | Plugin Discovery UI | WP-A |
| WP-E | Developer Documentation & ADRs | WP-A, WP-B |

See [Implementation Prompts](../../../prompts/implementation/) for detailed specifications.

## Key Implementation Notes

1. **Existing mechanic manifest schema** in `src/schemas/mechanic-manifest.schema.ts` provides foundation
2. **Snap-ranking already has manifest.json** - use as migration template
3. **No new npm dependencies** - use existing zod, zustand, idb, react-query
4. **Static JSON registry** on GitHub initially (no server infrastructure)

## Release Preparation

- [x] WP-A: Plugin Core complete
- [x] WP-B: Plugin Migration complete
- [ ] WP-C: User documentation complete
- [ ] WP-D: Plugin browser and manager functional
- [ ] WP-E: Developer documentation & ADRs complete
- [ ] Tests passing
- [ ] /sync-docs passing
- [ ] /verify-docs passing
- [ ] /pii-scan passing
- [x] Devlog created
- [x] Retrospective written

---

## Related Documentation

- [Roadmap Overview](../README.md)
- [v0.12.5: Snap Ranking & Fit Layout](./v0.12.5.md)
- [v0.14.0: Advanced Mechanics](./v0.14.0.md)
- [Implementation Prompts](../../../prompts/implementation/)
- [Feature Specifications](../features/)

---

**Status**: In Progress
