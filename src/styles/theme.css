/**
 * Theme CSS Custom Properties
 *
 * Defines the design tokens for light and dark themes.
 * Uses CSS custom properties for runtime theme switching.
 */

:root {
  /* ============================================
     Typography
     ============================================ */
  --font-family-base: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  --font-family-heading: var(--font-family-base);

  /* Fluid typography scale */
  --text-fluid-title: clamp(1rem, 2vw + 0.5rem, 1.5rem);
  --text-fluid-body: clamp(0.875rem, 1.5vw + 0.5rem, 1.125rem);
  --text-fluid-small: clamp(0.75rem, 1vw + 0.5rem, 0.875rem);

  /* Fixed typography scale */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;

  /* ============================================
     Spacing
     ============================================ */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;

  /* ============================================
     Border Radius
     ============================================ */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 9999px;

  /* ============================================
     Transitions
     ============================================ */
  --transition-fast: 150ms ease;
  --transition-normal: 250ms ease;
  --transition-slow: 350ms ease;
  --transition-theme: 200ms ease-in-out;

  /* ============================================
     Elevation (Shadows)
     ============================================ */
  --elevation-0: none;
  --elevation-1: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
  --elevation-2: 0 3px 6px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.12);
  --elevation-3: 0 10px 20px rgba(0, 0, 0, 0.15), 0 3px 6px rgba(0, 0, 0, 0.1);
  --elevation-4: 0 15px 25px rgba(0, 0, 0, 0.15), 0 5px 10px rgba(0, 0, 0, 0.05);
  --elevation-5: 0 20px 40px rgba(0, 0, 0, 0.2);

  /* ============================================
     Card Dimensions
     ============================================ */
  --card-width: 140px;
  --card-height: 196px;
  --card-border-radius: 8px;
  --grid-gap: 1rem;
}

/* ============================================
   Light Theme (Default)
   ============================================ */
:root,
[data-colour-scheme="light"] {
  /* Colours */
  --colour-background: #f5f5f5;
  --colour-surface: #ffffff;
  --colour-surface-elevated: #ffffff;
  --colour-text: #1a1a1a;
  --colour-text-secondary: #4a4a4a;
  --colour-text-muted: #666666;
  --colour-border: #e0e0e0;
  --colour-border-light: #f0f0f0;

  /* Primary accent */
  --colour-primary: #2563eb;
  --colour-primary-hover: #1d4ed8;
  --colour-primary-text: #ffffff;

  /* Secondary accent */
  --colour-secondary: #64748b;
  --colour-secondary-hover: #475569;
  --colour-secondary-text: #ffffff;

  /* Semantic colours */
  --colour-success: #22c55e;
  --colour-warning: #f59e0b;
  --colour-error: #ef4444;
  --colour-info: #3b82f6;

  /* Card back styling */
  --card-back-background: linear-gradient(135deg, #1e3a5f 0%, #0d1b2a 100%);
  --card-back-text: rgba(255, 255, 255, 0.9);
  --card-back-text-background: rgba(255, 255, 255, 0.15);
  --card-back-logo-colour: rgba(255, 255, 255, 0.85);

  /* Card front overlay - dark variant (default) */
  --card-overlay-background: rgba(0, 0, 0, 0.75);
  --card-overlay-text: #ffffff;
  --card-overlay-text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);

  /* Shadows */
  --shadow-card: 0 2px 4px rgba(0, 0, 0, 0.15);
  --shadow-card-hover: 0 6px 16px rgba(0, 0, 0, 0.2);

  /* Focus */
  --focus-colour: #4f9eff;
  --focus-ring: 0 0 0 3px rgba(79, 158, 255, 0.4);

  /* Glassmorphism */
  --glass-background: rgba(255, 255, 255, 0.15);
  --glass-border: rgba(255, 255, 255, 0.2);

  /* Overlay */
  --overlay-background: rgba(0, 0, 0, 0.5);
}

/* ============================================
   Dark Theme
   ============================================ */
[data-colour-scheme="dark"] {
  /* Colours */
  --colour-background: #0f0f0f;
  --colour-surface: #1a1a1a;
  --colour-surface-elevated: #242424;
  --colour-text: #f5f5f5;
  --colour-text-secondary: #b0b0b0;
  --colour-text-muted: #888888;
  --colour-border: #333333;
  --colour-border-light: #2a2a2a;

  /* Primary accent */
  --colour-primary: #3b82f6;
  --colour-primary-hover: #60a5fa;
  --colour-primary-text: #ffffff;

  /* Secondary accent */
  --colour-secondary: #94a3b8;
  --colour-secondary-hover: #cbd5e1;
  --colour-secondary-text: #1a1a1a;

  /* Semantic colours */
  --colour-success: #4ade80;
  --colour-warning: #fbbf24;
  --colour-error: #f87171;
  --colour-info: #60a5fa;

  /* Card back styling */
  --card-back-background: linear-gradient(135deg, #1e3a5f 0%, #0d1b2a 100%);
  --card-back-text: rgba(255, 255, 255, 0.9);
  --card-back-text-background: rgba(255, 255, 255, 0.15);
  --card-back-logo-colour: rgba(255, 255, 255, 0.85);

  /* Card front overlay - dark variant (default) */
  --card-overlay-background: rgba(0, 0, 0, 0.8);
  --card-overlay-text: #ffffff;
  --card-overlay-text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);

  /* Shadows - lighter for dark mode */
  --shadow-card: 0 2px 4px rgba(0, 0, 0, 0.3);
  --shadow-card-hover: 0 6px 16px rgba(0, 0, 0, 0.4);

  /* Elevation - adjusted for dark mode */
  --elevation-1: 0 1px 3px rgba(0, 0, 0, 0.24), 0 1px 2px rgba(0, 0, 0, 0.36);
  --elevation-2: 0 3px 6px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.24);
  --elevation-3: 0 10px 20px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.2);
  --elevation-4: 0 15px 25px rgba(0, 0, 0, 0.3), 0 5px 10px rgba(0, 0, 0, 0.1);
  --elevation-5: 0 20px 40px rgba(0, 0, 0, 0.4);

  /* Focus */
  --focus-colour: #60a5fa;
  --focus-ring: 0 0 0 3px rgba(96, 165, 250, 0.4);

  /* Glassmorphism */
  --glass-background: rgba(255, 255, 255, 0.08);
  --glass-border: rgba(255, 255, 255, 0.12);

  /* Overlay */
  --overlay-background: rgba(0, 0, 0, 0.7);
}

/* ============================================
   Accessibility Utilities
   ============================================ */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ============================================
   Theme Transition
   ============================================ */
html,
body,
.theme-transition {
  transition:
    background-color var(--transition-theme),
    color var(--transition-theme),
    border-color var(--transition-theme);
}

/* Disable transitions during theme switch to prevent flash */
html.theme-switching,
html.theme-switching * {
  transition: none !important;
}

/* ============================================
   High Contrast Mode Support
   ============================================ */
@media (prefers-contrast: high) {
  :root,
  [data-colour-scheme="light"] {
    --colour-text: #000000;
    --colour-background: #ffffff;
    --colour-border: #000000;
  }

  [data-colour-scheme="dark"] {
    --colour-text: #ffffff;
    --colour-background: #000000;
    --colour-border: #ffffff;
  }
}

/* ============================================
   Card Overlay Variants
   ============================================ */

/* Light overlay variant - white background with dark text */
[data-overlay-style="light"] {
  --card-overlay-background: rgba(255, 255, 255, 0.85);
  --card-overlay-text: #1a1a1a;
  --card-overlay-text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
}

/* Dark overlay variant (default) - black background with white text */
[data-overlay-style="dark"] {
  --card-overlay-background: rgba(0, 0, 0, 0.75);
  --card-overlay-text: #ffffff;
  --card-overlay-text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

/* ============================================
   Title Display Modes
   ============================================ */

/* Wrap mode - allow multi-line titles */
[data-title-display="wrap"] {
  --card-title-white-space: normal;
  --card-title-overflow: visible;
  --card-title-text-overflow: clip;
  --card-title-line-clamp: 2;
}

/* ============================================
   Reduced Motion Support
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* User-controlled reduced motion (overrides system preference) */
[data-reduce-motion="on"] *,
[data-reduce-motion="on"] *::before,
[data-reduce-motion="on"] *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

/* ============================================
   High Contrast Mode (User Setting)
   ============================================ */
[data-high-contrast="true"] {
  --colour-text: #000000;
  --colour-background: #ffffff;
  --colour-surface: #ffffff;
  --colour-border: #000000;
  --colour-border-light: #333333;
}

[data-colour-scheme="dark"][data-high-contrast="true"] {
  --colour-text: #ffffff;
  --colour-background: #000000;
  --colour-surface: #000000;
  --colour-border: #ffffff;
  --colour-border-light: #cccccc;
}
